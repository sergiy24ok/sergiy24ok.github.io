<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Pult</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
		body {
			padding-top: 3em;
		}
		
		a:active {
			background: #efefef;
		}

		a {
			display: inline-block;
			box-sizing: border-box;
			padding: 1em;
			margin: .5em;
			border: 1px solid black;
			border-radius: 5px;
			width: 45%;
			text-decoration: none;
		}

		.i {
			position: fixed;
			top: 1em;
			right: 1em;
		}
	</style>
</head>
<body>
	<div class="i"></div>
	<div>
		<a href="#" id="prev">Prev</a>
		<a href="#" id="next">Next</a>
		
	</div>

	<div>
		<a href="#" id="first">First</a>
		<a href="#" id="overview">Overview</a>
		<a href="#" id="reward">Reward</a>
	</div>
	
	<script  type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="sonic-server.js"></script>
	<script type="text/javascript" src="sonic-socket.js"></script>
	<script type="text/javascript" src="sonic-coder.js"></script>
	<script type="text/javascript" src="ring-buffer.js"></script>

	<script>
		$(function(){

			var c = ['prev', 'next', 'first', 'overview', 'reward', 'p', 'n', 'f', 'o', 'r'];
			var ALPHABET = generateAlphabet(c);

			var sonicSocket;

		    function generateAlphabet(list) {
			  var alphabet = '';
			  for (var i = 0; i < Math.min(list.length, 9); i++) {
			    alphabet += i.toString();
			  }
			  return alphabet;
			}

		    sonicSocket = new SonicSocket({ alphabet: ALPHABET});

		    var j = 0;
			function sendCmd(cmd){
				if (0 == j % 2) {
					cmd = cmd[0];
				}
				sonicSocket.send(c.indexOf(cmd));
				$('.i').text(cmd);
				j++;
			}

			$('#prev').click(function(){
				sendCmd('prev');
			});

			$('#next').click(function(){
				sendCmd('next');
			});

			$('#first').click(function(){
				sendCmd('first');
			});

			$('#overview').click(function(){
				sendCmd('overview');
			});

			$('#reward').click(function(){
				sendCmd('reward');
			});
		});
	</script>
</body>
</html>
